## 쉽고 빠르게 B2C 고객의 서비스 만족도를 향상시키는 솔루션  만들기

발표 : 김정곤, AWS 솔루션즈 아키텍트

### 잘 만든 서비스를 잘 운영하려면

- Amazon Connect : 고객의 요구를 정확히 파악해 즉시 응답을 할 수 있는 콜센터
- Amazon Pinpoint : 이메일, sms, 푸시, 음성등의 채널을 통해 고객과 교류할 수 있는 마케팅 커뮤니케이션 서비스

### Amazon Connect

- 요금은 전화 시간당과 채팅메세지 건당의 요금으로 부가된다고 하는데 아마 여기에 S3의 스토리지 사용요금도 부가되는 스타일이라 생각된다.

- 콘솔에서 connect 선택

- Amazon Connect에 사용자 저장, 기존 디렉터리에 연결, SAML 2.0 기반 인증 등이 있다. 여기서 디렉토리 서비스라는 이야기가 나오는데 우선 아래의 관련 링크로 설명을 보안하도록 한다. Amazon Connect에 사용자 저장를 선택하고 인스턴스 이름을 정해준다.

- 그후 Next Step을 선택하면 앞에 만든 인스턴스에 접속할 관리자를 만들 수 있다. username과 password로 접속할 수 있으므로 꼭 기억해두자.

- 3단계 텔레포니 옵션은 인바운드, 아웃바운드 둘다 체크를 해놓고 다음 항목으로 넘어간다.

- 데이터 스토리지 설정을 한다. S3에 모든 통화, 채팅 내역등이 저장되는데 여기도 특별히 설정할 것은 없다.
- 인스턴스 생성 후 시작을 누르면 새 창이 열리면서 아까 만든 인스턴스 명을 가진 connect 창이 열린다. 여기서 시작을 누르면 전화번호 신청 화면으로 들어간다.
- 한국은 안된다. 하지만 여기선 알아보는 거 정도니 미국으로 해보자. 실 전화번호가 없어서 이것도 안된다. 우선 설명은 뒤로 미루고 대시보드로 가 보자 뭘 해도 안된다. 안되는건 안되는거고 우선 그냥 눌러나보자
- 라우팅에서 전화번호 신청 및 관리, 응대시간 등의 관리가 가능하다. 응대시간은 새로 만들기를 하면 am 9 ~ pm5로 되어있다. 조정해주면 된다.
- 작업시간을 설정했으므로 이번엔 대기열을 만든다. 회원은 24시간 비회원은 업무시간으로 대기열을 추가해주자. 작업시간과 아웃바운드 호출자 전화번호를 선택해 주자.
- 대기열에 우선순위 설정을 위해 사용자에 라우팅 프로필을 설정한다. 
- 이제 이 라우팅 프로필에 배정할 사용자를 만들어준다. 자신이 직접해도 되고 할당해줘도 된다.
- 이제 고객이 문의를 했을 때 고객응대의 흐름을 만들어 보자. 만들어진 샘플을 보면 다음과 같다
  - 프롬프트 재생 : 미리 설정한 음성파일이나 택스트를 음성으로 안내한다(현재 상담시간이 아니어서...)
  - 작업시간 확인 : 우리가 응대시간에 맞는 경우인지 아닌지에 따라 분기를 만들어 줄 수 있다
  - 대기열로 전송 : 이거로 대기상태로 보내고 대기열과 우선순위에 따라 응대를 하게 만들어준다.
  - 만든 고객응대 흐름을 전화번호에 연결합니다.
- 이후 테스트를 해보려면 메인보드에 가서 채팅 테스트를 선택하면 고객과 ccp(Call Control Panel)의 화면을 볼 수 있다. 여기서 고객과 직원의 입장에서 테스트가 가능하다.

> 아직 한국에 없는 서비스이긴 하지만 한국 전화번호를 지원하면 신규로 고객센터를 만들려는 회사들에겐 비싼 콜센터 프로그램을 대체할 만한 도구라고 생각된다.
>
> 회사의 입장에서는 관리자 별로 인스턴스만 만들어도 된다는 점도 편하다 나머지는 관리자가 알아서 사용자 추가, 삭제, 응대흐름등을 제어하면 되기 때문에 ccp에 대한 교육만 진행해주면 된다.

### Amazon Pinpoint

- 이건 마케팅 도구라고 한다. (회원에게 마케팅 메일 발송, 구매확인 전송, 대량발송)
- 우선 메일 발송 기능등이 있는 리전에서만 된다.
- 캠페인을 단위로 삼아서 segment 선택, channel 선택, content 선택, schedule등으로 나뉜다.
- 세그먼트는 csv파일이나, s3, Mobile/Web user등으로 필터링을 한다.
- channel은 sms, mail, Push, sns등이 있다
- 컨텐츠는 개인화 메세지를 만드는 부분이다.
- 참여 분석, 전송율, 모바일 / 웹 분석
- pin point로 가서 프로젝트명으로 프로젝트 생성을 하고 이메일을 선택한다.
- 그럼 이메일 인증을 해야 하는데 SES서비스를 사용하는 사람이면 기존 이메일에 ses로 인증받은 이메일을 선택할 수 있다.
- 그 후 메일을 보낼 사람을 선택하기 위해서 csv로  파일을 임포트 한다. 아래의 조건을 지키지 않는 경우 400에러가 발생한다.
  - 여기서 key값은 다음의 조건을 충족해야 한다
  - ChannelType : SMS, APNS, EMAIL, GCM
  - Address : +12365550182, 1a2b3c4d5e6f7g8h9i0j1a2b3c4d5e6f, john.stiles@example.com, 4d5e6f1a2b3c4d5e6f7g8h9i0j1a2b3c
  - 이것을 제외한 나머지 항목은 key의 prefix로 User.UserAttributes.
  - 사용자의 고유 식별자는 key의 prefix로 User.UserId 로 표기해야 한다.
- 이렇게 하므로써 기초 전체 데이터를 만들수 있다. 이제 여기서 필터로 별도의 세그먼트를 만들어보자.

- 세그먼트 구축(Build a segment) 선택 후 엔드포인트의 세그먼트를 선택한다.
- 필터로 세분화 할 수 있다. 여기서는 사용자로 필터링을 선택한다.
- 그러고 세그먼트에서 필터링 할 항목과 값을 선택한다. (예를 들어 마케팅 수신 여부 참 거짓 등으로 정할 수 있는 것이다)
- 이 후 세그먼트를 기준으로 캠패인을 생성하자 그러고 위에서 설정한 세그먼트를 선택한다.
- 그런다음 메세지를 만들 수도 있는데 세 이메일 메세지 생성 등을 통해 메일을 만들 수 있다.
- 이렇게 하면 메일 발송 시점을 정할 수 있다. 즉시, 한번, 매시간, 매일, 매주, 매월 중 선택할 수 있다. 이러면 발송현황 등도 알 수 있다고 한다
- 수신현황등도 확인이 가능하다던데 이건 아직 어떻게 해야 할지 모르겠다.

### 관련링크

[Active Director개념](https://hackersstudy.tistory.com/53)

[왜 디렉토리 서비스가 IT업무에 중요할까요?](https://cloud.gowit.co.kr/it%EB%A6%AC%EB%8D%94%EC%89%BD%EA%B3%BC-%EC%A0%84%EB%9E%B5-%EC%99%9C-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EC%84%9C%EB%B9%84%EC%8A%A4%EA%B0%80-it-%EC%97%85%EB%AC%B4%EC%97%90-%EC%A4%91%EC%9A%94/)

Microsoft Active Directory